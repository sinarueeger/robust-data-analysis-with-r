---
title: ".large[Robust data analysis]"
subtitle: "An introduction to R"
author: "Sina Rüeger & Allie Burns"
date: "2019-09-05"
output_dir: "../docs"
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css", "extra-theme.css"]
    lib_dir: libs
    nature:
      slideNumberFormat: "%current%"                  # 12
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      highlightSpans: true
      titleSlideClass: [center, middle, inverse]
    #  ratio: '16:9' 
    self_contained: true
---

<!--------- 
https://www.helpessentials.com/2017/08/02/sprinkle-some-google-fonts-into-your-projects/
--------->

```{r xaringan-themer, include = FALSE}
library(xaringanthemer)
mono_light(
  base_color = "#2b2d2f",
  white_color = "#ffffff", 
  header_font_google = google_font("Karla", "700i"), ## Oswald
  header_font_url = "https://fonts.googleapis.com/css?family=Karla:400,700,400italic",
  text_font_google   = google_font("Karla", "400", "700i"),  ## Roboto
  code_font_google   = google_font("Inconsolata"),#,
  text_font_size = "30px"
  )
```


```{r, setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(knitr.kable.NA = '')
library(knitr)
library(kableExtra)
library(magrittr)
library(stringr)
library(ggplot2)

library(dplyr)
theme_set(hrbrthemes::theme_ipsum(subtitle_size = 14, caption_size = 9, axis_title_size = 12)) ## make sure to 

```


<!---------------------- ToC ------------------------------>

---
class: left, middle

# Who we are

.pull-left-large[
## Sina

- **Background** in Data Science and Biostatistics
- Works with genomic and clinical **data**

`r icon::fa_twitter()` <small>@sinarueeger</small><br />
`r icon::fa_github()` <small>@sinarueeger</small><br />
<!----- `r icon::fa_link()` <small>sinarueeger.github.io</small> -------->

]

.pull-right-small[
## Allie

- **Background** in Biology and Bioinformatics
- Works with ... **data**

`r icon::fa_twitter()` <small>@imallieburns</small><br />
`r icon::fa_github()` <small>@allie-burns</small><br />


]





<!---------------------- SLIDE info ------------------------------>

<!--- adding a footer https://github.com/yihui/xaringan/wiki/Footer-and-header-lines ------>
---
class: left, middle

## Slides
### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://bit.ly/rds-slides

## Handbook
### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://bit.ly/rds-handbook

## RStudio Cloud
### &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://bit.ly/rds-rstudio


<!---------------------- ToC ------------------------------>

---
class: left, middle

.pull-left[
# **1. **
## [Data Analysis](#part-1-data-analysis)
<!------- What makes a Data Analysis robust?------>
<br>

# **3. ** 
## [Workshop](#part-3-workshop) 

]

.pull-right[
# **2. ** 
## [Introducing R](#part-2-r)
<!--------How can R help with that?----------->
<br>

# **4.** 
## [Learning R](#part-4-learning-r)
]


<!------------------------------------------------------->
<!---------------------- PART 1 ------------------------->
<!------------------------------------------------------->
---
class: left, middle, inverse

# Part 1
# <a name="part-1-data-analysis"></a>Data Analysis


---
class: left, middle

# Data Analysis Workflow

<div class="figure">
<img src="https://d33wubrfki0l68.cloudfront.net/571b056757d68e6df81a3e3853f54d3c76ad6efc/32d37/diagrams/data-science.png" width="669" alt="R 4 DS image" />
<caption>From <a href="https://r4ds.had.co.nz/introduction.html">R for Data Science by Grolemund & Wickham, 2017.</a></caption>
</div>

---
exclude: true
# Emojification of Data Analysis Workflow


### `r emo::ji("thinking")` `r icon::fa_arrow_right(colour = "gray")` `r icon::fa_table(colour = "black")` `r icon::fa_arrow_right(color = "gray")` `r icon::fa_laptop(colour = "#377eb8")` `r icon::fa_arrows_alt(color = "gray")` `r icon::fa_r_project(colour = "#377eb8")` `r icon::fa_arrow_right(colour = "gray")` `r icon::fa_chart_line(color = "#f03b20")` `r icon::fa_arrow_right(colour = "gray")` `r icon::fa_lightbulb(color = "#31a354")` `r icon::fa_arrow_right(colour = "gray")` `r icon::fa_map_signs(color = "#d95f0e")`
<!--- question > getting data > analysing / distill knowledge > do soemthing with that -->

<!------`Question > Data > Analyse data with a tool > Distill knowlege from data > Feel enlightened :-) > Take decisions` ------->

---
exclude: true

<div class="figure">
<img src="https://github.com/allisonhorst/stats-illustrations/raw/master/openscapes/environmental-data-science-r4ds.png" width="700" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a> for <a href="https://www.openscapes.org/">openscapes</a></p>
</div>

 




---
class: left, middle

# Principles

- Tidy data
- Different modules
- Module dependency
- Flow: Entrance → Iteration → Exit 
- Sharing of results

---
class: left, middle

# In Reality


<div class="figure">
<img src="https://d33wubrfki0l68.cloudfront.net/571b056757d68e6df81a3e3853f54d3c76ad6efc/32d37/diagrams/data-science-annotated.png" width="669" alt="R 4 DS image" />
</div>




???

_Revisiting modules many many times: robust DA when this works at easy_.




---
class: left, middle

# Requirements to Software

- Used by others
- Translation of modules to Code
- Easy updating of modules
- Continuously developed & improved
- Sharing ready results + scripts



<!------------------------------------------------------->
<!--------------- Thought experiment -------------------->
<!------------------------------------------------------->
---
exclude: true

# Thought experiment


---
exclude: true

## Q1: 
### What is the most annoying & repetitive task at work? 
## Q2: 
### How could you automate it? 

---
exclude: true

# Automation

Programming is essentially an automation of a process
- for common tasks
- scalable
- complicated tasks
- where precision is needed 
- to reuse frameworks
- to redo something from the past

Side effect: reproducibility. 

---
class: left, middle, inverse


<!------------------------------------------------------->
<!---------------------- PART 2 ------------------------->
<!------------------------------------------------------->
---
class: left, middle, inverse

# Part 2
# <a name="part-2-r"></a>R


---
class: left, middle

> <p><small>As developers, “tidyevalutions” helps us make sure the user do as little typing as possible and can express really rich ideas [for analysis]. This is what underlies ggplot2 and some of our other libraries (Editor’s note: ggplot2 is a popular data visualization library.)</p></small> The idea is to get things out of your head and on to the computer as quickly as possible.

[_Interview with Hadley Wickham, Quartz, 2019_](https://qz.com/1661487/hadley-wickham-on-the-future-of-r-python-and-the-tidyverse/)



---
class: left, middle

# R

- is "a programming language for statistical computing"
- is free
- has a webpage: https://www.r-project.org/
- just celebrated its [25 year anniversary](https://rss.onlinelibrary.wiley.com/doi/10.1111/j.1740-9713.2018.01169.x)
- comes with *basic*/*default* packages, but there are over 13'000 R-packages `r emo::ji("open_mouth")` that can be installed through [CRAN](https://cran.r-project.org/web/packages/) or repositories like github



---
class: center, middle

# What is R used for?

---
class: middle

# Quite a few things

Lots of (but not all) data science, data analysis & stats stuff



???

_sdflkjfdksjdf_.



---
class: left, middle

# Capabilities of R

---
class: left, middle

## Communication of results
- through literate programming
- through a web application

## Data visualisation


## Accessing APIs



???

_Beyond being a calculator and being able to estimate statistical models, R can help us to organise the data analysis workflow better. _


---
class: left, middle


# R is constantly evolving & improving



???

_Other biologists_

---
class: left, middle

# Some terms

- Function

- Library

- Script


---
class: left, middle

## Function

- Programming typically works like this: you apply a function to an object. 

- You could also say that you apply an **action** (a verb) to an **object** (a noun). 

- This is an important propertiy, because a chain of such verbs can create a _programming script_. 


---
class: left, middle

## Library

- Library or package is a **collection of functions**. 

- Anyone can contribute a package.  

---
class: left, middle

## Script

- Example with plot: function, arguments, package/library, objects


---
class: left, middle

# R vs RStudio



---
class: left, middle

# Programming language vs. natural language


- Data analysis workflow divides the DA into modules.

- R helps you to express these moduls for your analysis. 

- Similar to natural languages: tool to communicate with others. Programming: communication with computer (+colleagues).




---
exclude: true

# Hierarchy of best practices

1. documentation (`lintr`)
1. run all script (`usethis`)
1. version control (`gitr`)
1. unit tests and sanity checks (`testthat`, `assertr`)
1. write functions, package them and tell everyone (`devtools`, `blogdown`)
1. continuous integration (`devtools`, `blogdown`)
1. makefile (caching) (`drake`)
1. binder (`holepunch`)



---
class: left, middle, inverse

<!------------------------------------------------------->
<!---------------------- PART 3 ------------------------->
<!------------------------------------------------------->
---
class: left, middle, inverse

# Part 3
# <a name="part-3-workshop"></a>Workshop


---
class: left, middle

# Goal

<div class="figure">
<img src="https://d33wubrfki0l68.cloudfront.net/571b056757d68e6df81a3e3853f54d3c76ad6efc/32d37/diagrams/data-science.png" width="300" alt="R 4 DS image" />
<p class="caption">From <a href="https://r4ds.had.co.nz/introduction.html">R for Data Science by Grolemund & Wickham, 2017.</a></p>
</div>



- Make a data visualisation
- Import data into R
- Make the data analysis-ready
- Create a report that gives insights into meteorite falls around the world.



???

_two steps: make changes + add things_.


---
class: left, middle

# Get started

Go to RStudio Cloud

http://bit.ly/rds-workshop

Click **Make permanent copy**



---
class: left, middle, inverse



<!------------------------------------------------------->
<!---------------------- PART 3 ------------------------->
<!------------------------------------------------------->
---
class: left, middle, inverse

# Part 3
# <a name="part-3-workshop"></a>Workshop Dessert

---
class: left, middle

<div class="figure">
<img src="https://happygitwithr.com/img/watch-me-diff-watch-me-rebase-smaller.png
" width="700" alt="Cover image" />
<p class="caption">Source <a href="https://happygitwithr.com/">Happy Git with R by Jenny Bryan</a></p>
</div>



---
class: left, middle

# Git & R

--
1. Use git. 
--

2. Read [*Happy Git with R*](https://happygitwithr.com/). 
--

3. Use the handy *git interface* in RStudio. 
--

4. `r emo::ji("party")`
--

5. Use [gist.github.com](https://gist.github.com/) to share & store code snippets, notes, thoughts and blogposts. 



---
class: left, middle

# R in the wild

---
class: left, middle

## Research compendium:

<div class="figure">
<a href="https://github.com/seabbs/DirectEffBCGPolicyChange">
<img border="0" alt="mouse" src="img/bcg.png" width="600">
</a>
<p class="caption">Source: <a href="https://github.com/seabbs/DirectEffBCGPolicyChange">DirectEffBCGPolicyChange by Sam Abbott</a></p>
</div>


---
class: left, middle

## Blogpost: [Analysing mouse autism data](https://notstatschat.rbind.io/2019/06/16/analysing-the-mouse-autism-data/)

<div class="figure">
<a href="https://notstatschat.rbind.io/2019/06/16/analysing-the-mouse-autism-data/">
<img border="0" alt="mouse" src="img/mouse.png" width="400">
</a>
<p class="caption">Source: <a href="https://notstatschat.rbind.io/2019/06/16/analysing-the-mouse-autism-data/">Analysing mouse autism data</a></p>
</div>

---
class: left, middle

## Data journalism

<div class="figure">
<a href="https://www.srf.ch/static/srf-data/data/2018/federer/#/en">
<img border="0" alt="SRF" src="img/datajournalism.png" width="700">
</a>
<p class="caption">Source: <a href="https://www.srf.ch/static/srf-data/data/2018/federer/#/en">SRF</a></p>
</div>


---

## Data journalism

<div class="figure">
<a href="https://srfdata.github.io/2018-01-roger-federer/#load_data">
<img border="0" alt="SRF" src="img/datajournalism_code.png" width="800">
</a>
<p class="caption">Source: <a href="https://www.srf.ch/static/srf-data/data/2018/federer/#/en">SRF</a></p>
</div>



---

## Web application with Shiny

<div class="figure">
<a href="https://kevinrue.shinyapps.io/isee-shiny-contest/">
<img border="0" alt="SRF" src="https://d33wubrfki0l68.cloudfront.net/8e0d1f45ed43ea538143b4b3cc7ea1cd7ad17e69/33284/images/2019-04-05-isee.png" width="800">
</a>
<p class="caption">Source: <a href="https://blog.rstudio.com/2019/04/05/first-shiny-contest-winners/">Winner of the Shiny Contest 2019</a></p>
</div>





---

## Animations

<div class="figure">
<a href="https://raw.githubusercontent.com/gadenbuie/tidy-animated-verbs/master/images/anti-join.gif">
<img src="https://raw.githubusercontent.com/gadenbuie/tidy-animated-verbs/master/images/anti-join.gif" width="400">
</a>
<p class="caption">Source: <a href="https://github.com/gadenbuie/tidy-animated-verbs#tidy-animated-verbs">Github @gadenbuie</a></p>
</div>


---

## Fun things: Memes and GIFs

<div class="figure">
<a href="http://djnavarro.net/post/2018-05-03-valid-social-commentary/">
<img src="http://djnavarro.net/post/2018-05-03-valid-social-commentary_files/figure-html/unnamed-chunk-2-1.png" width="500">
</a>
<p class="caption">Source: <a href="http://djnavarro.net/post/2018-05-03-valid-social-commentary/">Danielle Navaro</a></p>
</div>


---
class: center, middle


<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/r_first_then.png" height="500" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a></p>
</div>


---
class: left, middle

# Finding neat packages & functions

---
class: left, middle

## 1. Data import

- different r packages to import data: [`{readr}`](), [`{data.table}`]()
- `{datapasta}`: https://twitter.com/dataandme/status/1148548556850114561
- `{fabricatr}`: https://rviews.rstudio.com/2019/07/01/imagine-your-data-before-you-collect-it/

---
class: left, middle

## 2. Data manipulation

- [`{dplyr`}]()
- [`{janitor`}]() package


---
class: left, middle

## 3. Dataviz

- ['{esquisse}'](https://github.com/dreamRs/esquisse) to interactively create a plot. 
- many other \#dataviz libraries in R: [`{gganimate}`](https://github.com/thomasp85/gganimate), [`{plotly}`](https://plot.ly/r/), [`{vegalite}`](https://github.com/hrbrmstr/vegalite)
- [R Graph Gallery](https://www.r-graph-gallery.com/)
- Publication ready plots with [`{cowplot}`](https://github.com/wilkelab/cowplot) and [`{ggpubr}`](https://github.com/kassambara/ggpubr)


---
class: left, bottom

## ggpubr
Publication-ready plots

<div class="figure">
<img src="https://rpkgs.datanovia.com/ggpubr/tools/README-ggpubr-box-plot-dot-plots-strip-charts-2.png" width="350" alt="Cover image" />
<p class="caption">Produced by <a href="https://github.com/kassambara/ggpubr">ggpubr package</a></p>
</div>




---
class: left, middle, inverse


<!------------------------------------------------------->
<!---------------------- PART 4 ------------------------->
<!------------------------------------------------------->
---
class: left, middle, inverse


# Part 4
# <a name="part-4-learning-r"></a>Learning R

<!----------------------------------------------->

---
class: left, middle

# Learning strategies
<!-------
- Learn with isolated & digestable examples
- Sources of examples: tidytuesday, advent of code / tidies of march (irene steves)
- Surroud yourself with the language: embed R into your life
- Listen to podcasts or watch videos: https://www.rstats.nyc/2019/nyr/ / community calls: https://ropensci.org/commcalls/
- Make use of pen + paper
-------->

---
class: left, middle

## 1. Learn with isolated & digestable examples


---
class: left, middle

## 2. Look for a steady stream of data or exercises

[tidytuesday](https://github.com/rfordatascience/tidytuesday)s

---
class: left, middle

## 3. Watch recordings

- New York R conference [recordings](https://www.rstats.nyc/2019/nyr/)
- R conference [recordings](https://www.youtube.com/channel/UC_R5smHVXRYGhZYDJsnXTwg)
- RStudio conference [recordings](https://resources.rstudio.com/rstudio-conf-2019)
- rOpenSci community call [archive](https://ropensci.org/commcalls/)
<!------- or attend a conference, screen casts --------->


<!----------------------------------------------->
---
class: left, middle

# Embrace imperfection

---
class: left, middle


### Programming is an iterative process


### 1 Problem → 1+ solutions

---
class: left, middle

## Exploit imperfection

- Look at & review each others code

- Rewrite your code

- Look at open source code


<!----------------------------------------------->

---
class: left, middle

# Cheatsheets



<!----------------------------------------------->
---
class: left, middle

# How to ask for help


---
class: left, middle

## 1. Look online

- [Stack Overflow](https://stackoverflow.com/) (SO)
- [RStudio Community](https://community.rstudio.com/)


---
class: left, middle

<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/reprex.png" height="500" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a></p>
</div>


---
class: left, middle

## 2. Create a reproducible example

1. create a reproducbile example using a small R available dataset (e.g. iris)
1. `install.packages("reprex")`
1. select code and run reprex


<!---- this will often already guide you to the solution -------> 

---
class: left, middle

## 3. Ask on SO, twitter, RStudio help

C+P r bit into one of the follwing streams:

- Ask within a community (R-Ladies, R4DS)
- https://community.rstudio.com/
- https://stackoverflow.com/
- Twitter using the `#rstats` hashtag: 

<!-------
More: https://masalmon.eu/2018/07/22/wheretogethelp/
- If its a bug: file an issue on github

Why not writing directly to the maintainer? Because online helps
----->



<!----------------------------------------------->

<!------------
- blogposts (rweekly!)
- R user group (RUG, R-Ladies)
- list: https://jumpingrivers.github.io/meetingsR/r-user-groups.html (if you know a meetup, make a PR)
- CoC
- R-Ladies
- French [slack](https://r-grrr.slack.com/join/shared_invite/enQtMzI4MzgwNTc4OTAxLWZlOGZiZTBiMWU0NDQ3OTYzOGE1YThiODgwZWNhNWEyYjI4ZDJiNmNhY2YyYWI5YzFiOTFkNDYxYzkwODUwNWM) + [online ressources](https://github.com/frrrenchies/frrrenchies)
- other languages
- R for DS (slack, tidytuesday)
- ropensci community calls / shinyapp (https://ropensci.shinyapps.io/contributr/)
- engage on twitter ([R for the rest of us](https://twitter.com/rfortherest) + [weareRLadies](https://twitter.com/WeAreRLadies/status/1154698236583698432) + [Mara Averick](https://twitter.com/dataandme) + [maelle Salmon](https://twitter.com/ma_salmon))
----->


---
class: center, middle

# Become part of the community


<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/welcome_to_rstats_twitter.png" height="400" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a></p>
</div>



---
class: left, middle

## R-Ladies 




???

_mention code of conduct_.


---
class: left, middle

## Online Communities

- R for Data Science online learning community: https://www.rfordatasci.com/ (slack, tidytuesday)
- R-ladies Slack: https://www.rfordatasci.com/
- French-speaking [r-grrr Slack](https://r-grrr.slack.com/join/shared_invite/enQtMzI4MzgwNTc4OTAxLWZlOGZiZTBiMWU0NDQ3OTYzOGE1YThiODgwZWNhNWEyYjI4ZDJiNmNhY2YyYWI5YzFiOTFkNDYxYzkwODUwNWM) (+ [online resources](https://github.com/frrrenchies/frrrenchies))



---
class: left, middle

## [rOpenSci](https://ropensci.org)

- Attend a community call ([archive](https://ropensci.org/commcalls/)).

- Contribute via the [shinyapp](https://ropensci.shinyapps.io/contributr/)


---
class: left, middle

## Join an R meetup

---
class: left, middle

### Lemanic region: 
- [R-Ladies](http://use-r-carlvogt.github.io/prochains-lunchs/)
- [Geneve RUG](https://www.meetup.com/Geneve-R-User-Group)
- [R lunches](http://use-r-carlvogt.github.io/prochains-lunchs/)
- [adminR](https://twitter.com/RLadiesRemote)

### [R Ladies Remote](https://twitter.com/RLadiesRemote) 
- Coffee chats
- Journal club

Full list of RUG's [here](https://jumpingrivers.github.io/meetingsR/r-user-groups.html) and for R-Ladies [here](https://gqueiroz.shinyapps.io/rshinylady/).


---
class: left, middle

## Read blogposts

Weekly supply of blogposts here: https://rweekly.org/.


---
class: left, middle

## Write blogposts

Start with gist.github.com, then move to blogdown. 


---
class: left, middle

## Engage on Twitter

Lots of cool #rstats folks on twitter. For example: 

- [Mara Averick: @dataandme](https://twitter.com/dataandme)
- [Maëlle Salmon: @ma_salmon](https://twitter.com/ma_salmon)
- [R for the rest of us: @rfortherest](https://twitter.com/rfortherest)
- [WeAreRLadies: @WeAreRLadies](https://twitter.com/WeAreRLadies)



---
class: left, middle


<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/openscapes/starwars-teamwork.png" width="600" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a> for <a href="https://www.openscapes.org/">openscapes</a></p>
</div>


<!----------------------------------------------->
---
class: center, middle

# .large[Questions?]



---
class: left, middle

<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/openscapes/starwars-rey-rstats.png" width="600" alt="Cover image" />
<p class="caption">Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@allison_horst</a> for <a href="https://www.openscapes.org/">openscapes</a></p>
</div>

