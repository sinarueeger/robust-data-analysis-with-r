<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Workshop | Robust data analysis: an introduction to R</title>
  <meta name="description" content="Handbook that complements slides for osip.epfl.ch" />
  <meta name="generator" content="bookdown 0.12.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Workshop | Robust data analysis: an introduction to R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://sinarueeger.github.io/robust-data-analysis-with-r/" />
  
  <meta property="og:description" content="Handbook that complements slides for osip.epfl.ch" />
  <meta name="github-repo" content="sinarueeger/robust-data-analysis-with-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Workshop | Robust data analysis: an introduction to R" />
  
  <meta name="twitter:description" content="Handbook that complements slides for osip.epfl.ch" />
  

<meta name="author" content="Sina Rüeger &amp; Allie Burns" />


<meta name="date" content="2019-09-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-r.html"/>
<link rel="next" href="beyond-the-basics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Robust data analysis: an introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>1</b> Data Analysis</a><ul>
<li class="chapter" data-level="1.1" data-path="data-analysis.html"><a href="data-analysis.html#data-analysis-in-reality"><i class="fa fa-check"></i><b>1.1</b> Data analysis in reality</a></li>
<li class="chapter" data-level="1.2" data-path="data-analysis.html"><a href="data-analysis.html#role-of-excel"><i class="fa fa-check"></i><b>1.2</b> Role of Excel</a></li>
<li class="chapter" data-level="1.3" data-path="data-analysis.html"><a href="data-analysis.html#requirements-to-data-analysis-software"><i class="fa fa-check"></i><b>1.3</b> Requirements to data analysis software</a></li>
<li class="chapter" data-level="1.4" data-path="data-analysis.html"><a href="data-analysis.html#more"><i class="fa fa-check"></i><b>1.4</b> More</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#features-of-r"><i class="fa fa-check"></i><b>2.1</b> Features of R</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions-objects-packages-and-scripts"><i class="fa fa-check"></i><b>2.2</b> Functions, objects, packages and scripts</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-vs.-rstudio"><i class="fa fa-check"></i><b>2.3</b> R vs. RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#programming-language-vs-natural-language"><i class="fa fa-check"></i><b>2.4</b> Programming language vs natural language</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#more-1"><i class="fa fa-check"></i><b>2.5</b> More</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workshop.html"><a href="workshop.html"><i class="fa fa-check"></i><b>3</b> Workshop</a><ul>
<li class="chapter" data-level="3.1" data-path="workshop.html"><a href="workshop.html#rstudio-cloud"><i class="fa fa-check"></i><b>3.1</b> RStudio Cloud</a></li>
<li class="chapter" data-level="3.2" data-path="workshop.html"><a href="workshop.html#data-visualisation"><i class="fa fa-check"></i><b>3.2</b> Data visualisation</a></li>
<li class="chapter" data-level="3.3" data-path="workshop.html"><a href="workshop.html#import-data"><i class="fa fa-check"></i><b>3.3</b> Import data</a></li>
<li class="chapter" data-level="3.4" data-path="workshop.html"><a href="workshop.html#tidy-transform-data"><i class="fa fa-check"></i><b>3.4</b> Tidy + Transform Data</a></li>
<li class="chapter" data-level="3.5" data-path="workshop.html"><a href="workshop.html#report-with-rmarkdown"><i class="fa fa-check"></i><b>3.5</b> Report with RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html"><i class="fa fa-check"></i><b>4</b> Beyond the Basics</a><ul>
<li class="chapter" data-level="4.1" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#git-r"><i class="fa fa-check"></i><b>4.1</b> Git &amp; R</a></li>
<li class="chapter" data-level="4.2" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#examples-of-r-in-the-wild"><i class="fa fa-check"></i><b>4.2</b> Examples of R in the wild</a></li>
<li class="chapter" data-level="4.3" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#finding-neat-packages-functions"><i class="fa fa-check"></i><b>4.3</b> Finding neat packages &amp; functions</a><ul>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#data-import"><i class="fa fa-check"></i>Data import</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#data-exploration"><i class="fa fa-check"></i>Data exploration</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#data-manipulation"><i class="fa fa-check"></i>Data manipulation</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#data-visualisation-1"><i class="fa fa-check"></i>Data visualisation</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#ggpubr"><i class="fa fa-check"></i>ggpubr</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#holepunch"><i class="fa fa-check"></i>holepunch</a></li>
<li class="chapter" data-level="" data-path="beyond-the-basics.html"><a href="beyond-the-basics.html#best-practices"><i class="fa fa-check"></i>Best practices</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="learning-r.html"><a href="learning-r.html"><i class="fa fa-check"></i><b>5</b> Learning R</a><ul>
<li class="chapter" data-level="5.1" data-path="learning-r.html"><a href="learning-r.html#learning-strategies"><i class="fa fa-check"></i><b>5.1</b> Learning strategies</a><ul>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#learn-with-isolated-digestible-examples"><i class="fa fa-check"></i>Learn with isolated &amp; digestible examples</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#look-for-a-steady-stream-of-data-or-exercises"><i class="fa fa-check"></i>Look for a steady stream of data or exercises</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#watch-recordings"><i class="fa fa-check"></i>Watch recordings</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#read-blog-posts"><i class="fa fa-check"></i>Read blog posts</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="learning-r.html"><a href="learning-r.html#embrace-imperfection"><i class="fa fa-check"></i><b>5.2</b> Embrace imperfection</a><ul>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#exploit-imperfection"><i class="fa fa-check"></i>Exploit imperfection</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="learning-r.html"><a href="learning-r.html#how-to-ask-for-help"><i class="fa fa-check"></i><b>5.3</b> How to ask for help</a><ul>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#look-online"><i class="fa fa-check"></i>Look online</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#create-a-reproducible-example"><i class="fa fa-check"></i>Create a reproducible example</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#ask-on-your-question-online"><i class="fa fa-check"></i>Ask on your question online</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="learning-r.html"><a href="learning-r.html#become-part-of-the-community"><i class="fa fa-check"></i><b>5.4</b> Become part of the community</a><ul>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#r-ladies"><i class="fa fa-check"></i>R-Ladies</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#join-an-online-community"><i class="fa fa-check"></i>Join an online community</a></li>
<li><a href="learning-r.html#ropensci"><span>rOpenSci</span></a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#join-an-r-meetup"><i class="fa fa-check"></i>Join an R meetup</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#write-blog-posts"><i class="fa fa-check"></i>Write blog posts</a></li>
<li class="chapter" data-level="" data-path="learning-r.html"><a href="learning-r.html#engage-on-twitter"><i class="fa fa-check"></i>Engage on Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a><ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#more-r-learning-resources"><i class="fa fa-check"></i>More R learning resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Robust data analysis: an introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="workshop" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Workshop</h1>
<p>The goal of the workshop is to cover most of the <a href="data-analysis.html#data-analysis">data analysis workflow</a>. This includes:</p>
<ul>
<li><em>Importing</em> data into R</li>
<li>Making data analysis-ready through <em>tidying &amp; transformation</em></li>
<li><em>Visualising</em> data</li>
<li>Creating a report to <em>communicate</em> our findings</li>
</ul>
<p>We will use data describing drug use in the US and meteorite falls around the world:</p>
<ol style="list-style-type: decimal">
<li><code>drug_use</code> is a dataset that is provided through <a href="https://cran.r-project.org/web/packages/fivethirtyeight/vignettes/fivethirtyeight.html">a package</a> by <a href="https://fivethirtyeight.com/">fivethirtyeight</a>. If you type <code>data()</code> into the console, you will see a list of other “in-house” datasets, and if you type for example <code>?iris</code> you will see the description of the famous flower dataset. Using an R dataset can be useful when you do not want to bother with the data import but instead focus on learning.</li>
<li>The meteorite data was provided by <a href="https://github.com/rfordatascience/tidytuesday">TidyTuesday</a>. TidyTuesday will be discussed <a href="learning-r.html#look-for-a-steady-stream-of-data-or-exercises">later</a>, but in summary, it is a weekly release of a dataset that has already been tamed.</li>
</ol>
<p>We will guide you through the four R-scripts and below are some extra tips and information.</p>
<div id="rstudio-cloud" class="section level2">
<h2><span class="header-section-number">3.1</span> RStudio Cloud</h2>
<p>For the workshop, we are going to use <a href="https://rstudio.cloud/spaces/24655/join?access_code=nN9TW6co5lZRS5yKGO4Xp1ZChDUXoyCGVzamIzXQ">RStudio Cloud</a>.</p>
<p>First, click on the following link: <a href="http://bit.ly/rds-rstudio" class="uri">http://bit.ly/rds-rstudio</a>. Then log in with a Google account, Github account or any email address.</p>
<p>Loading RStudio Cloud might take a while. Once it appears, click on the tab <code>Project</code>, choose <code>Workshop</code> and then <code>Make a permanent copy</code>.</p>
<!-------------------------------->
</div>
<div id="data-visualisation" class="section level2">
<h2><span class="header-section-number">3.2</span> Data visualisation</h2>
<!-------------------------------->
<p>The main data visualisation engine these days is the <code>ggplot2</code> package.</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/ggplot2_exploratory.png" width="500" alt="Cover image" />
<p class="caption">
Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@ allison_horst</a>
</p>
</div>
<p>The main advantage of <code>ggplot2</code> is the recipe-like structure, also called <em>grammar</em>. However, depending on your needs (e.g. interactivity) there are <a href="beyond-the-basics.html#finding-neat-packages-functions">more suitable packages</a>.</p>
<!-------------------------------->
</div>
<div id="import-data" class="section level2">
<h2><span class="header-section-number">3.3</span> Import data</h2>
<!-------------------------------->
<p>Getting data into R can be cumbersome. This is mainly because datasets need to be stored in a format that R understands<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. When we want to import data from others<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, we need to tell R how the data looks, which can result in a command like this:</p>
<pre><code>read.table(&quot;dataset.csv&quot;, 
           sep = &quot;,&quot;,
           fill = TRUE, 
           row.names = TRUE, 
           header = FALSE,
         col.names = paste0(&quot;V&quot;, seq_len(ncol)))</code></pre>
<p>Instead of remembering this difficult command, RStudio helps us with this button on the top-right in the tab “Environment”.</p>
<div class="figure">
<p><img src="img/import-data.png" width="500" alt="Import data" /></p>
</div>
<p>This allows us to import Excel or rectangular text files, and then copy+paste the complicated command into the R-script for reproducibility.</p>
<!-------------------------------->
</div>
<div id="tidy-transform-data" class="section level2">
<h2><span class="header-section-number">3.4</span> Tidy + Transform Data</h2>
<!-------------------------------->
<p>Before doing any actual data analysis, we need to bring the data into an analysis-friendly format. Although we humans like datasets that offer a quick overview with several columns, R prefers to have what is called <a href="https://r4ds.had.co.nz/tidy-data.html"><em>tidy data</em></a>. A dataset is tidy when:</p>
<ul>
<li>Each variable has its own column.</li>
<li>Each observation has its row.</li>
<li>Each value has its own cell.</li>
</ul>
<p>Here is an example that is not tidy.</p>
<pre><code> age       n alcohol_use cocaine_use marijuana_use
 12     2798         3.9         0.1           1.1
 13     2757         8.5         0.1           3.4
 14     2792        18.1         0.1           8.7</code></pre>
<p>But this is a tidy version:</p>
<pre><code> age       n drug            use
 12     2798 alcohol_use     3.9
 12     2798 cocaine_use     0.1
 12     2798 marijuana_use   1.1
 13     2757 alcohol_use     8.5
 13     2757 cocaine_use     0.1
 13     2757 marijuana_use   3.4
 14     2792 alcohol_use    18.1
 14     2792 cocaine_use     0.1
 14     2792 marijuana_use   8.7
 15     2956 alcohol_use    29.2
...</code></pre>
<p>To get to a tidy dataset, we use <em>reshaping</em> functions from the <code>tidyr</code>.</p>
<p>Other steps in the data preparation process are <em>data transformation</em> and <em>data cleaning</em>. This step of the data analysis workflow is highly interactive, and one often jumps from one to the other. For example, when doing a descriptive analysis of your dataset you might discover implausible values, which will need to be treated in the data transformation part.</p>
<p>This is one reason why scripts are so important. If you forgot something in a step right after the data import you can simply add the command and re-run the script.</p>
<p>Here is the list of handy R packages for data preparation:</p>
<ul>
<li><a href="https://tidyr.tidyverse.org/"><code>tidyr</code></a> for reshaping the data</li>
<li><a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a> for transforming the data</li>
<li><a href="http://sfirke.github.io/janitor/"><code>janitor</code></a> for data cleaning</li>
</ul>
<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/dplyr_wrangling.png" width="500" alt="Cover image" />
<p class="caption">
Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@ allison_horst</a>
</p>
</div>
<!-------------------------------->
</div>
<div id="report-with-rmarkdown" class="section level2">
<h2><span class="header-section-number">3.5</span> Report with RMarkdown</h2>
<!-------------------------------->
<p>In the last script, we will bundle everything we learned into one R script. You might notice that this does not have the typical <code>.R</code> file extension, but instead <code>.Rmd</code>. <code>.Rmd</code> means RMarkdown and combines the power of <a href="https://en.wikipedia.org/wiki/Markdown">Markdown</a> and R. This form of mixing programming and writing is also called <em>literal programming</em>.</p>
<p><a href="https://rmarkdown.rstudio.com/">RMarkdown</a> files can be used to create documents, such as a presentation, a website (html) or a document (word or pdf).</p>
<p>Here are some links to dive into RMarkdown</p>
<ul>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdown cheatsheet</a></li>
<li><a href="https://resources.rstudio.com/rstudio-cheatsheets/rmarkdown-2-0-cheat-sheet">RMarkdown RStudio cheatsheet</a>.</li>
<li><a href="https://holtzy.github.io/Pimp-my-rmd/">Pimp my .Rmd: a few tips for R Markdown</a></li>
<li><a href="https://rmd4sci.njtierney.com/">RMarkdown for Scientists</a></li>
</ul>
<div class="figure">
<img src="https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/rmarkdown_wizards.png" width="500" alt="Cover image" />
<p class="caption">
Artwork by <a href="https://github.com/allisonhorst/stats-illustrations">@ allison_horst</a>
</p>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Practical recommendations for organizing spreadsheet data in a way that both humans and computer programs can read: <a href="https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989">Data Organization in Spreadsheets</a> by Broman &amp; Woo (2018).<a href="workshop.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>If you are the person supplying yourself with data, make sure that you always store the data consistently, e.g. space delimited. This way, reading data into R becomes easier.<a href="workshop.html#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="beyond-the-basics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
